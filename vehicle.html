<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Автомобиль | Аренда микроавтобусов и минивэнов</title>
  <script>try{var t=localStorage.getItem('theme')||'light';if(t!=='festive'){t='light'};if(t!=='light'){document.documentElement.setAttribute('data-theme',t)}}catch(e){}</script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <a href="./" class="logo"><svg width="22" height="22" viewBox="0 0 24 24"><path fill="currentColor" d="M3 13h2l1 4h12l1-4h2l-2 7H5zM7 13l3-7h4l3 7z"/></svg><span>Перевозки</span></a>
      <nav class="nav"><button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu">Меню</button><ul id="nav-menu" class="nav-menu"><li><a href="./fleet.html">Автопарк</a></li><li><a href="./#gallery">Галерея</a></li><li><a href="./#contacts">Контакты</a></li></ul></nav>
      <a class="btn btn-primary tel-cta" href="tel:+375291234567">+375 (29) 123-45-67</a>
    </div>
  </header>
  <main>
    <section class="section">
      <div class="container">
        <div class="v-layout">
          <div>
            <div class="v-gallery card">
              <div class="v-gallery-main"><img id="v-main-img" alt=""></div>
              <div id="v-thumbs" class="v-thumbs"></div>
            </div>
          </div>
          <aside class="v-info">
            <h1 id="v-name" class="section-title" style="margin-top:0"></h1>
            <p id="v-desc" class="muted"></p>
          </aside>
        </div>
        <div class="card" style="margin-top:16px">
          <h2 class="section-title" style="margin:0 0 10px">Заказ и связь</h2>
          <div class="hero-ctas" style="margin-top:6px">
            <a class="btn btn-primary" href="tel:+375291234567">Позвонить</a>
            <a class="btn btn-outline" href="https://wa.me/375291234567" target="_blank" rel="noopener">WhatsApp</a>
            <a class="btn btn-outline" href="https://t.me/share/url?url=&text=Хочу%20заказать%20поездку" target="_blank" rel="noopener">Telegram</a>
          </div>
          <p class="muted" style="margin-top:6px">Работаем 24/7. Сообщите дату, маршрут и количество пассажиров — подберём оптимальный вариант.</p>
        </div>
      </div>
    </section>
  </main>
  <div id="lightbox" class="lightbox" aria-hidden="true"><button class="lightbox-close" aria-label="Закрыть">×</button><button class="lightbox-prev" aria-label="Предыдущая">‹</button><img class="lightbox-img" alt=""><button class="lightbox-next" aria-label="Следующая">›</button></div>
  <script>
  ;(function(){
    function q(name){var m=location.search.match(new RegExp('[?&]'+name+'=([^&]+)'));return m?decodeURIComponent(m[1]):''}
    var slug=q('slug')
    if(!slug){location.href='fleet.html';return}
    fetch('api/vehicles/'+encodeURIComponent(slug)).then(function(r){return r.ok?r.json():fetch('data/vehicles.json',{cache:'no-cache'}).then(function(x){return x.json()}).then(function(list){return list.find(function(i){return i.slug===slug})||{}})}).then(function(v){
      if(!v||!v.slug){location.href='fleet.html';return}
      document.title=v.name+' | Автопарк'
      var nameEl=document.getElementById('v-name'); nameEl.textContent=v.name
      var desc=document.getElementById('v-desc')
      var autoDesc=(function(){
        var t=(v.class==='minibus'?'Комфортный микроавтобус':'Автомобиль')
        var s=(v.seats?(' на '+v.seats+' мест'):'')
        return t+s+' для экскурсий, корпоративных поездок и свадеб. Чистый салон, кондиционер, аккуратный водитель. Подача вовремя, бережное отношение к багажу.'
      })()
      desc.textContent=(v.description&&v.description.trim())?v.description:autoDesc
      var main=document.getElementById('v-main-img')
      var thumbs=document.getElementById('v-thumbs')
      var imgs=(v.images||[]).slice()
      if(imgs.length){
        var ci=(typeof v.coverIndex==='number'&&v.coverIndex>=0&&v.coverIndex<imgs.length)?v.coverIndex:0
        var cover=imgs[ci]; imgs=[cover].concat(imgs.filter(function(s,idx){return idx!==ci}))
      }
      function setMain(src){main.src=src}
      if(imgs[0]) setMain(imgs[0])
      imgs.forEach(function(src,i){
        var b=document.createElement('button'); b.className='v-thumb'; b.type='button'
        var im=document.createElement('img'); im.src=src; im.alt=v.name; b.appendChild(im)
        if(i===0) b.classList.add('active')
        b.addEventListener('click',function(){
          [].slice.call(thumbs.children).forEach(function(x){x.classList.remove('active')}); b.classList.add('active'); setMain(src)
        })
        thumbs.appendChild(b)
      })
      var lb=document.getElementById('lightbox'),lbImg=lb.querySelector('.lightbox-img'),prev=lb.querySelector('.lightbox-prev'),next=lb.querySelector('.lightbox-next'),close=lb.querySelector('.lightbox-close');var cur=0
      function open(){lbImg.src=main.src;lb.classList.add('open');lb.setAttribute('aria-hidden','false')}
      function hide(){lb.classList.remove('open');lb.setAttribute('aria-hidden','true')}
      function show(d){
        var arr=[].slice.call(thumbs.querySelectorAll('img')).map(function(i){return i.src})
        if(!arr.length)return
        cur=(cur+d+arr.length)%arr.length
        lbImg.src=arr[cur]
      }
      main.addEventListener('click',open)
      close.addEventListener('click',hide)
      prev.addEventListener('click',function(){show(-1)})
      next.addEventListener('click',function(){show(1)})
      document.addEventListener('keydown',function(e){if(!lb.classList.contains('open'))return;if(e.key==='Escape')hide();if(e.key==='ArrowRight')show(1);if(e.key==='ArrowLeft')show(-1)})
    })
  })()
  </script>
  <script src="./main.js"></script>
</body>
</html>
