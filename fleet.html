<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Автопарк | Аренда микроавтобусов и минивэнов</title>
  <script>try{var t=localStorage.getItem('theme')||'light';if(t!=='festive'){t='light'};if(t!=='light'){document.documentElement.setAttribute('data-theme',t)}}catch(e){}</script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <a href="./" class="logo"><svg width="22" height="22" viewBox="0 0 24 24"><path fill="currentColor" d="M3 13h2l1 4h12l1-4h2l-2 7H5zM7 13l3-7h4l3 7z"/></svg><span>Перевозки</span></a>
      <nav class="nav"><button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu">Меню</button><ul id="nav-menu" class="nav-menu"><li><a href="./#services">Услуги</a></li><li><a href="./#gallery">Галерея</a></li><li><a href="./#contacts">Контакты</a></li></ul></nav>
      <div class="theme-switch" aria-label="Выбор темы"><button class="theme-btn" data-theme="light">Светлый</button><button class="theme-btn" data-theme="festive">Праздничный</button></div>
      <a class="btn btn-primary tel-cta" href="tel:+375291234567">+375 (29) 123-45-67</a>
    </div>
  </header>
  <main>
    <section class="section alt">
      <div class="container">
        <div class="card" style="padding:24px;background:linear-gradient(135deg,var(--accent-1-soft),transparent),var(--card)">
          <h1 class="section-title" style="margin:0 0 6px">Наш автопарк</h1>
          <p class="muted" style="margin:0 0 12px">Выберите подходящий класс авто и узнайте стоимость пакета.</p>
          <div class="filters" style="display:grid;grid-template-columns:2fr 1fr 1fr;gap:12px">
            <input id="flt-q" placeholder="Поиск по названию">
            <select id="flt-class"><option value="">Все классы</option></select>
            <select id="flt-seats">
              <option value="">Любое число мест</option>
              <option value="2">2+</option>
              <option value="4">4+</option>
              <option value="6">6+</option>
              <option value="10">10+</option>
            </select>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container">
        <div id="fleet-list" class="grid cards"></div>
      </div>
    </section>
  </main>
  <script>
  ;(function(){
    var data=[]
    var wrap=document.getElementById('fleet-list')
    function render(list){
      wrap.innerHTML=''
      list.forEach(function(v){
        var a=document.createElement('a');a.className='card vehicle';a.href='vehicle.html?slug='+encodeURIComponent(v.slug)
        var img='images/gallery/sedan-1.jpg'
        if(v.images && v.images.length){var ci=(typeof v.coverIndex==='number' && v.coverIndex>=0 && v.coverIndex<v.images.length)?v.coverIndex:0;img=v.images[ci]}
        var media=document.createElement('div');media.className='media';media.style.cssText='aspect-ratio:4/3;border-radius:12px;overflow:hidden;margin-bottom:10px;border:1px solid var(--border);background:var(--panel);display:flex;align-items:center;justify-content:center'
        var im=document.createElement('img');im.src=img;im.alt=v.name||'Авто';media.appendChild(im)
        var chips=document.createElement('div');chips.style.cssText='display:flex;gap:8px;flex-wrap:wrap;margin-top:8px'
        var chip1=document.createElement('span');chip1.className='chip';chip1.textContent=v.class||''
        var chip2=document.createElement('span');chip2.className='chip';chip2.textContent=(v.seats||'-')+' мест'
        chips.appendChild(chip1);chips.appendChild(chip2)
        var h3=document.createElement('h3');h3.textContent=v.name
        var p=document.createElement('p');p.className='muted';p.textContent='от '+(v.pricePerHour||'-')+' BYN/час'
        a.appendChild(media);a.appendChild(h3);a.appendChild(p);a.appendChild(chips)
        im.addEventListener('load',function(){ if(im.naturalWidth && im.naturalHeight && im.naturalHeight>im.naturalWidth){ im.classList.add('portrait') } })
        wrap.appendChild(a)
      })
    }
    function applyFilters(){
      var q=(document.getElementById('flt-q').value||'').toLowerCase().trim()
      var c=document.getElementById('flt-class').value
      var s=document.getElementById('flt-seats').value
      var list=data.filter(function(v){
        var okQ=!q || (v.name||'').toLowerCase().indexOf(q)>=0
        var okC=!c || v.class===c
        var okS=!s || (v.seats||0)>=parseInt(s,10)
        return okQ && okC && okS
      })
      render(list)
    }
    fetch('/api/classes',{cache:'no-cache'}).then(function(r){return r.json()}).then(function(list){
      var sel=document.getElementById('flt-class')
      ;(list||[]).forEach(function(c){
        var o=document.createElement('option');o.value=c.key;o.textContent=c.title;sel.appendChild(o)
      })
    }).catch(function(){})
    fetch('data/vehicles.json',{cache:'no-cache'}).then(function(r){return r.json()}).then(function(list){data=list||[];render(data)})
    document.addEventListener('input',function(e){
      if(e.target && (e.target.id==='flt-q' || e.target.id==='flt-class' || e.target.id==='flt-seats')) applyFilters()
    })
  })()
  </script>
  <script src="./main.js"></script>
</body>
</html>
